<div class="user-module-container">
  <h1 class="user-module-title">Usu√°rios</h1>
  <table class="user-module-table">
    <thead>
      <tr>
        <th>CPF</th>
        <th>Nome</th>
        <th>E-mail</th>
        <th>Telefone</th>
        <th>Tipo de Conta</th>
        <th>Face ID / Foto</th>
        <th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody id="user-body">
      </tbody>
  </table>
  <button class="user-module-add-button" onclick="window.location.href='cadastro.html'">ADICIONAR USU√ÅRIO</button>
</div>

<script>
  // Ensure these functions are globally accessible or re-attached
  // The script will execute when loaded into the right-content-area

  let usuarios = JSON.parse(localStorage.getItem("usuariosCadastrados")) || [];

  function carregarUsuarios() {
    const tbody = document.getElementById("user-body");
    if (!tbody) { // Added check in case element isn't ready
        console.warn("tbody element not found in user.html content.");
        return;
    }
    tbody.innerHTML = "";
    usuarios.forEach((user, index) => {
      const tr = document.createElement("tr");

      tr.innerHTML = `
        <td>${user.cpf}</td>
        <td>${user.nome}</td>
        <td>${user.email}</td>
        <td>${user.telefone}</td>
        <td>${user.tpc}</td>
        <td>${user.face}</td>
        <td>
          <button class="user-module-edit-btn" onclick="editarUsuario(${index})">‚úèÔ∏è</button>
          <button class="user-module-delete-btn" onclick="excluirUsuario(${index})">üóëÔ∏è</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  function editarUsuario(index) {
    alert(`Editar usu√°rio: ${usuarios[index].nome} (fun√ß√£o ainda n√£o implementada)`);
    // Ideally, you'd navigate to a dedicated edit form or open a modal here
  }

  function excluirUsuario(index) {
    if (confirm(`Deseja excluir o usu√°rio ${usuarios[index].nome}?`)) {
      usuarios.splice(index, 1);
      localStorage.setItem("usuariosCadastrados", JSON.stringify(usuarios));
      carregarUsuarios();
    }
  }

  // Initial load when this script is executed
  // It's good practice to call this after the content is loaded
  // The loadContent function in menu.html will call this explicitly if needed.
  // carregarUsuarios(); // This might run too early if tbody is not yet fully rendered,
                       // so the explicit call in menu.html's loadContent callback is better.
</script>