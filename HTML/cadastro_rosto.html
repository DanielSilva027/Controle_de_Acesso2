<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Cadastros</title>
    <link
      rel="stylesheet"
      href="/Controle_de_Acesso2/accets/CSS/cadastro_rosto.css"
    />
  </head>

  <body>
    <div class="container">
      <div id="cadastro-form" style="display: none">
        <h2>Novo Cadastro de Rosto</h2>
        <label for="nome">Nome:</label><br />
        <input type="text" id="nome" name="nome" /><br /><br />
        <label for="cpf">CPF:</label><br />
        <input type="text" id="cpf" name="cpf" /><br /><br />
        <button onclick="salvarNovoCadastro()">Salvar Cadastro</button>
        <button onclick="esconderFormularioCadastro()">Cancelar</button>
        <hr />
      </div>
      <div id="cadastros-container"></div>
      <div class="bottom-buttons">
        <button class="voltar" onclick="location.href='index.html'">
          Voltar
        </button>
        <button class="create-button" onclick="mostrarFormularioCadastro()">
          Criar Novo
        </button>
      </div>
    </div>

    <script>
      //Exibir formaulario de Cadastro
      function mostrarFormularioCadastro() {
        document.getElementById("cadastro-form").style.display = "block";
      }

      //Ocultar formaulario de Cadastro
      function ocultarFormularioCadastro() {
        document.getElementById("cadastro-form").style.display = "none";
      }

      //Add novo user
      function salvarNovoCadastro() {
        const nome = document.getElementById("nome").value;
        const cpf = document.getElementById("cpf").value;

        if (nome && cpf) {
          const novoCadastro = { nome: nome, cpf: cpf };
          const cadastrosSalvos = localStorage.getItem("usuariosCadastrados");
          const listaDeCadastros = cadastrosSalvos
            ? JSON.parse(cadastrosSalvos)
            : [];

          listaDeCadastros.push(novoCadastro);
          localStorage.setItem(
            "usuariosCadastrados",
            JSON.stringify(listaDeCadastros)
          );

          document.getElementById("nome").value = "";
          document.getElementById("cpf").value = "";
          esconderFormularioCadastro();
          exibirCadastros();
        } else {
          alert("Por favor, preencha nome e CPF.");
        }
      }

      function exibirCadastros() {
        const cadastrosContainer = document.getElementById(
          "cadastros-container"
        );
        cadastrosContainer.innerHTML = "";

        const cadastrosSalvos = localStorage.getItem("usuariosCadastrados");
        const listaDeCadastros = cadastrosSalvos
          ? JSON.parse(cadastrosSalvos)
          : [];

        if (listaDeCadastros.length > 0) {
          listaDeCadastros.forEach((dados) => {
            const info = document.createElement("div");
            info.className = "info-cadastrada";
            info.innerHTML = `
                            <h2>Cadastro de Rosto</h2>
                            <p><strong>Nome:</strong> ${dados.nome}</p>
                            <p><strong>CPF:</strong> ${dados.cpf}</p>
                            <hr>
                        `;
            cadastrosContainer.appendChild(info);
          });
        } else {
          const mensagem = document.createElement("p");
          mensagem.textContent = "Nenhum dado cadastrado.";
          cadastrosContainer.appendChild(mensagem);
        }
      }

      // Carrega os user existentes ao carregar a p√°gina
      exibirCadastros();
    </script>
  </body>
</html>
